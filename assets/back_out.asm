PUSH 0
POP R1
PUSH 0
POP R2
CALL :main
PUSH R3
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
PUSH R1

PUSH R2
PUSH 1
SUB
POP R1
CALL :hlt
POP R1

:main
PUSH R1
PUSH R2
PUSH 0
SUB
POP R1
PUSH R1
PUSH 3
ADD
POP R2
PUSH 3
POP [0+R1]
PUSH R1

PUSH R2
PUSH 0
SUB
POP R1
CALL :in
POP R1
PUSH R3
POP [0+R1]
PUSH [0+R1]
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
PUSH R1

PUSH R2
PUSH 1
SUB
POP R1
CALL :out
POP R1
PUSH [0+R1]
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
CALL :func_2_1
PUSH R3
POP [1+R1]
PUSH [1+R1]
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
PUSH R1

PUSH R2
PUSH 1
SUB
POP R1
CALL :out
POP R1
PUSH [0+R1]
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
CALL :func_4_1
PUSH R3
POP [2+R1]
PUSH [2+R1]
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
PUSH R1

PUSH R2
PUSH 1
SUB
POP R1
CALL :out
POP R1
PUSH 0
PUSH R1
POP R2
POP R3
POP R1
RET


:func_2_1
PUSH R1
PUSH R2
PUSH 1
SUB
POP R1
PUSH R1
PUSH 1
ADD
POP R2
PUSH [0+R1]
PUSH 1
EQ
PUSH 1
JE :label1

PUSH 1
PUSH 1
JE :label0

:label1
PUSH 1
PUSH R1
POP R2
POP R3
POP R1
RET

:label0
PUSH [0+R1]
PUSH 1
SUB
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
CALL :func_2_1
PUSH R3
PUSH [0+R1]
MUL
PUSH R1
POP R2
POP R3
POP R1
RET


:func_4_1
PUSH R1
PUSH R2
PUSH 1
SUB
POP R1
PUSH R1
PUSH 1
ADD
POP R2
PUSH [0+R1]
PUSH 1
EQ
PUSH 1
JE :label3

PUSH 1
PUSH 1
JE :label2

:label3
PUSH 1
PUSH R1
POP R2
POP R3
POP R1
RET

:label2
PUSH [0+R1]
PUSH 0
EQ
PUSH 1
JE :label5

PUSH 1
PUSH 1
JE :label4

:label5
PUSH 0
PUSH R1
POP R2
POP R3
POP R1
RET

:label4
PUSH [0+R1]
PUSH 1
SUB
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
CALL :func_4_1
PUSH R3
PUSH [0+R1]
PUSH 2
SUB
POP [R2]
PUSH R2
PUSH 1
ADD
POP R2
CALL :func_4_1
PUSH R3
ADD
PUSH R1
POP R2
POP R3
POP R1
RET

:hlt
POP R2
PUSH [R1]
OUT
HLT

:in
IN
POP R3
RET

:out
PUSH [R1]
OUT
RET

:pow
PUSH [R1]
PUSH [1+R1]
POW
POP R3
RET

